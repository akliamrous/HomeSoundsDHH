<html>
	<head>
		<link rel="shortcut icon" type="image/png" href="https://cdns.iconmonstr.com/wp-content/assets/preview/2012/240/iconmonstr-sound-wave-4.png"/>  
		<title>Waveform View - Home Sounds</title>
		<style style="text/css">
			body { 
			 font: 26px Helvetica, Arial; 
			}
		    form { padding: 20px; position: fixed; bottom: 0; right: 0;}
		    form button {font: 24px Helvetica, Arial;   }
		    form input { width: 250px; margin-right: 10px; font: 24px Helvetica, Arial;}
			.soundList{
			 padding-top: 320px;	
			}
			.scroll-left {
			 height: 28px;
			 overflow: hidden;
			 position: relative;
			}
			.scroll-left p {
			 color: rgb(75, 75, 75);
			 position: absolute;
			 width: 100%;
			 height: 100%;
			 margin: 0;
			 line-height: 26px;
			 text-align: left;
			 /* Starting position */
			 -moz-transform:translateX(100%);
			 -webkit-transform:translateX(100%);	
			 transform:translateX(100%);
			 /* Apply animation to this element */	
			 -moz-animation: scroll-left 9.5s linear 1;
			 -webkit-animation: scroll-left 9.5s linear 1;
			 animation: scroll-left 14s linear no-repeat;
			}
			/* Move it (define the animation) */
			@-moz-keyframes scroll-left {
			 0%   { -moz-transform: translateX(100%); }
			 100% { -moz-transform: translateX(-100%); }
			}
			@-webkit-keyframes scroll-left {
			 0%   { -webkit-transform: translateX(100%); }
			 100% { -webkit-transform: translateX(-100%); }
			}
			@keyframes scroll-left {
			 0%   { 
			 -moz-transform: translateX(100%); /* Browser bug fix */
			 -webkit-transform: translateX(100%); /* Browser bug fix */
			 transform: translateX(100%); 		
			 }
			 100% { 
			 -moz-transform: translateX(-100%); /* Browser bug fix */
			 -webkit-transform: translateX(-100%); /* Browser bug fix */
			 transform: translateX(-100%); 
			 }
			}
			button {
				background-color: white;
			}
			#but{
				position: fixed;
				bottom: 0;
				right: 0;
				}
		</style>
	</head>
	<body>
		<div class="soundList">
			<div class="scroll-left"></div>
		</div>
		
		<canvas id="waveform" width="1424" height="260"></canvas>
		<br>
		<script type="text/javascript" src="./pitchdetect.js"></script>
		<div id="but">
			<button onclick="toggleLiveInput()" id="toggleLiveInput">Start</button>
			<button onclick="stop()" id="toggleLiveInputStop" disabled="disabled">stop()</button>
		</div>
		
		<form action="">
		  Sound: <input id="s" autocomplete="off" />
		  Location: <input id="l" autocomplete="off" />
		  <button>Send</button>
		</form>
    
	<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
   
    <script>
      $(function () {
        var socket = io();
        
        $('form').submit(function(){
          socket.emit('sound message', {'sound': $('#s').val(), 'location': $('#l').val()});  
          $('#s').val('');
          $('#l').val('');
          
          return false;
        });
        
        socket.on('sound message', function(msg){ 
          
          //$('.soundList').text('');
          var currentTime = new Date(),
		  hours = currentTime.getHours(),
          minutes = currentTime.getMinutes();
          seconds = currentTime.getSeconds();
		  if (minutes < 10) {minutes = "0" + minutes;}
		  if (seconds < 10) {seconds = "0" + seconds;}
		  
		  //$('.soundList').append('<div class="scroll-left"><p>' + hours + ':' + minutes + ':' + seconds + '</p></div>');
		  //$('.soundList').append('<div class="scroll-left"><p><b>' + msg.sound + '</b>,' +  msg.location + '</p></div>');
		  $('.scroll-left').append('<p><b>' + msg.sound + '</b>, ' +  msg.location + '</p>');
		  //$('.soundList').append('<div class="scroll-left"><p style="margin-top: -16px;">[_____]</p></div>');
		  
        });
      });
    </script>
	
	</body>
</html>
